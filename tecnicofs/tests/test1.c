#include "fs/operations.h"
#include <assert.h>
#include <string.h>

int main() {

    char *str = "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";
    char *path = "/f1";
    char buffer[5010];

    assert(tfs_init() != -1);

    int f;
    ssize_t r;

    f = tfs_open(path, TFS_O_CREAT);
    assert(f != -1);

    r = tfs_write(f, str, strlen(str));
    assert(r == strlen(str));

    assert(tfs_close(f) != -1);

    f = tfs_open(path, 0);
    assert(f != -1);

    r = tfs_read(f, buffer, sizeof(buffer) - 1);
    assert(r == strlen(str));
    printf("buffer: %s\nstring: %s\n", buffer, str);
    
    printf("r: %ld\n", r);
    buffer[r] = '\0';
    assert(strcmp(buffer, str) == 0);

    assert(tfs_close(f) != -1);
	
	tfs_copy_to_external_fs(path,"test1.txt");

    printf("Successful test.\n");

    return 0;
}
