#include "fs/operations.h"
#include <assert.h>
#include <string.h>

int main() {

    char *str = "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";
    char *path = "/f1";
    char buffer[15500];

    assert(tfs_init() != -1);

    int f;
    ssize_t r;

    f = tfs_open(path, TFS_O_CREAT);
    assert(f != -1);

    r = tfs_write(f, str, strlen(str));
    printf("%ld\n",r);
    assert(r == strlen(str));

    assert(tfs_close(f) != -1);

    f = tfs_open(path, 0);
    assert(f != -1);

    r = tfs_read(f, buffer, sizeof(buffer) - 1);
    assert(r == strlen(str));

    buffer[r] = '\0';
    assert(strcmp(buffer, str) == 0);

    assert(tfs_close(f) != -1);

    printf("Successful test.\n");

    tfs_copy_to_external_fs(path, "test1.txt");

    return 0;
}
