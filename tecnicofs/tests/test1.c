#include "fs/operations.h"
#include <assert.h>
#include <string.h>

int main() {

    char *str = "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";
    char *path = "/f1";
    char buffer[18000];

    assert(tfs_init() != -1);

    int f;
    ssize_t r;

    f = tfs_open(path, TFS_O_CREAT);
    assert(f != -1);

    r = tfs_write(f, str, strlen(str));
    //printf("%ld\n",r);
    assert(r == strlen(str));

    assert(tfs_close(f) != -1);

    f = tfs_open(path, 0);
    assert(f != -1);

    r = tfs_read(f, buffer, sizeof(buffer) - 1);
    assert(r == strlen(str));

    buffer[r] = '\0';
    assert(strcmp(buffer, str) == 0);

    assert(tfs_close(f) != -1);

    printf("Successful test.\n");

    tfs_copy_to_external_fs(path, "test1.txt");

    return 0;
}
