#include "fs/operations.h"
#include <assert.h>
#include <string.h>

int main() {

    char *str = "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";
    char *path = "/f1";
    char buffer[11249];

    assert(tfs_init() != -1);

    int f;
    ssize_t r;

    f = tfs_open(path, TFS_O_CREAT);
    assert(f != -1);

    r = tfs_write(f, str, strlen(str));
    assert(r == strlen(str));

    assert(tfs_close(f) != -1);

    f = tfs_open(path, 0);
    assert(f != -1);

    r = tfs_read(f, buffer, sizeof(buffer) - 1);
    assert(r == strlen(str));

    buffer[r] = '\0';
    assert(strcmp(buffer, str) == 0);

    assert(tfs_close(f) != -1);

    printf("Successful test.\n");

    tfs_copy_to_external_fs(path, "test1.txt");

    return 0;
}
